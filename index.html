<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PawKind ‚Äî Adopt, Love, and Care</title>
  <meta name="description" content="PawKind ‚Äî kindness to animals, pet adoption, and stray welfare." />
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Inline minimal styles ‚Äî replace with your style.css if you prefer */
    :root { --bg:#f7efe6; --mint:#c4f0e1; --warm:#ffb07c; --card:#fff; --muted:#6b6b6b }
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:#222}
    header{display:flex;align-items:center;justify-content:space-between;padding:20px 6%}
    .logo{display:flex;align-items:center;gap:10px}
    .logo .brand{font-weight:800;color:#ff8f6b}
    nav{display:flex;gap:18px;align-items:center}
    a.btn-admin{background:transparent;border:2px solid rgba(0,0,0,0.06);padding:8px 12px;border-radius:8px;text-decoration:none;color:#333}
    .hero{padding:26px 6%}
    h1{font-size:36px;margin:4px 0}
    p.lead{color:var(--muted);max-width:800px}
    main{padding:30px 6%}
    .pet-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:18px}
    .pet-card{background:var(--card);border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.06);overflow:hidden}
    .pet-card img{width:100%;height:170px;object-fit:cover}
    .pet-card .body{padding:14px}
    .btn{background:linear-gradient(90deg,var(--warm),#ff8f6b);color:#fff;border:none;padding:10px 14px;border-radius:999px;cursor:pointer}
    .contact-card{max-width:700px;margin:20px auto;background:var(--card);padding:24px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.04)}
    label{display:block;margin:10px 0 6px;font-weight:600}
    input,select,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #eee}
    .bottle{position:fixed;right:18px;bottom:18px;width:64px;height:64px;border-radius:12px;background:#dff7ee;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 8px 28px rgba(0,0,0,0.18);z-index:999}
    @media(max-width:600px){h1{font-size:24px}}
  </style>

  <!-- supabase client CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- load supabaseClient (your file) -->
  <script type="module" src="supabaseClient.js"></script>
</head>
<body>
  <header>
    <div class="logo">
      <div style="font-size:22px" class="brand">üêæ PawKind</div>
      <div style="font-size:13px;color:var(--muted)">Adopt ‚Ä¢ Love ‚Ä¢ Care</div>
    </div>
    <nav>
      <a href="#adoption">Adoption</a>
      <a href="#contact">Contact</a>
      <a class="btn-admin" id="adminLoginBtn" href="admin/login.html">Admin Login</a>
    </nav>
  </header>

  <section class="hero">
    <h1>Adopt, Love, and Care</h1>
    <p class="lead">Find adoptable pets, join local volunteering, and support shelters. Be kind ‚Äî adopt responsibly.</p>
  </section>

  <main>
    <section id="adoption">
      <h2>Adoption Center</h2>
      <div id="petList" class="pet-container" aria-live="polite">
        <!-- pets will be injected here -->
      </div>
    </section>

    <section id="care" style="margin-top:36px">
      <h2>Care Tips</h2>
      <div style="background:#fff;padding:18px;border-radius:12px;margin-top:12px">
        <p style="margin:0;color:var(--muted)">Always introduce new foods slowly, provide fresh water, microchip your pets, and schedule regular vet visits.</p>
      </div>
    </section>

    <section id="contact" style="margin-top:36px">
      <h2>Contact / Join Us</h2>
      <div class="contact-card">
        <form id="contactForm" class="contact-form">
          <label for="name">Full Name</label>
          <input id="name" name="name" required>

          <label for="email">Email Address</label>
          <input id="email" name="email" type="email" required>

          <label for="phone">Phone</label>
          <input id="phone" name="phone" type="tel">

          <label for="interest">I'm interested in</label>
          <select id="interest" name="interest">
            <option>Adoption</option><option>Volunteering</option><option>Donation</option>
          </select>

          <label for="message">Message</label>
          <textarea id="message" name="message" rows="4" placeholder="Tell us how you'd like to help..."></textarea>

          <button class="btn" type="submit">Send Message</button>
        </form>
      </div>
    </section>
  </main>

  <div class="bottle" id="bottle" title="Discover PawBot">üê∂</div>

  <script type="module">
    import { supabase } from './supabaseClient.js';

    // CONTACT FORM -> insert into "contacts"
    const contactForm = document.getElementById('contactForm');
    contactForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const interest = document.getElementById('interest').value;
      const message = document.getElementById('message').value.trim();

      const { error } = await supabase
        .from('contacts')
        .insert([{ name, email, phone, interest, message }]);

      if (error) {
        console.error(error);
        alert('Submission failed ‚Äî check console.');
        return;
      }
      alert('Thanks! Your message was submitted.');
      contactForm.reset();
    });

    // LOAD PETS
    async function loadPets() {
      const { data, error } = await supabase
        .from('pets')
        .select('*')
        .order('created_at', { ascending: false });

      const petList = document.getElementById('petList');
      petList.innerHTML = '';

      if (error) {
        console.error('Error loading pets:', error);
        petList.innerHTML = '<p style="color:#a00">Unable to load pets.</p>';
        return;
      }
      if (!data || data.length === 0) {
        petList.innerHTML = '<p>No pets yet ‚Äî add some from the admin dashboard.</p>';
        return;
      }

      data.forEach(pet => {
        const el = document.createElement('div');
        el.className = 'pet-card';
        el.innerHTML = `
          <img src="${pet.photo || 'https://via.placeholder.com/400x300?text=No+Image'}" alt="${escapeHtml(pet.name)}">
          <div class="body">
            <h3>${escapeHtml(pet.name)}</h3>
            <p style="color:var(--muted)"><strong>Breed:</strong> ${escapeHtml(pet.breed || '‚Äî')} ‚Ä¢ <strong>Age:</strong> ${escapeHtml(pet.age || '‚Äî')}</p>
            <p style="color:var(--muted);margin-top:8px">${escapeHtml(pet.bio || '')}</p>
            <div style="margin-top:12px"><button class="btn" onclick="requestAdopt('${escapeAttr(pet.name)}')">Adopt Me</button></div>
          </div>
        `;
        petList.appendChild(el);
      });
    }

    function escapeHtml(s){ if(!s) return ''; return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
    function escapeAttr(s){ return (s||'').replace(/'/g,"\\'").replace(/"/g,'\\"'); }

    window.requestAdopt = function(name){
      if (confirm(`Request adoption for ${name}?`)){
        alert('Thanks! The adoption request will be processed by the team.');
      }
    }

    loadPets();

    // PawBot (hidden interactive bottle)
    const bottle = document.getElementById('bottle');
    bottle.addEventListener('click', async () => {
      speak("Woof! I'm PawBot ‚Äî your pet care buddy. Ask me something!");
      const q = prompt('PawBot ‚Äî ask a question about pet care:');
      if (!q) return;
      const reply = generateReply(q);
      alert('PawBot: ' + reply);
      speak(reply);
    });

    function generateReply(input){
      const q = (input||'').toLowerCase();
      if(q.includes('food')||q.includes('eat')) return 'Feed balanced food, fresh water daily. Portion depends on age and size.';
      if(q.includes('vaccin')) return 'Core vaccines include rabies, distemper, parvo. Check with a local vet.';
      if(q.includes('adopt')) return 'Click Adopt and fill the contact form ‚Äî our team will contact you.';
      return "I'm here to help! Tell me your pet's age or the main issue.";
    }

    function speak(text){
      if(!('speechSynthesis' in window)) return;
      const u = new SpeechSynthesisUtterance(text);
      u.lang = 'en-US'; u.rate = 0.95; u.pitch = 1.05;
      window.speechSynthesis.cancel(); window.speechSynthesis.speak(u);
    }
  </script>
</body>
</html>

